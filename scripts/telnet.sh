#!/usr/bin/env expect

# -----------------------------------------------------------------------------

set timeout 20
set host [lindex $argv 0]
set file_commands [lindex $argv 1]

# -----------------------------------------------------------------------------

set f [open "$file_commands"]
set commands [split [read $f] "\n"]
close $f

# -----------------------------------------------------------------------------

spawn telnet $host
expect "$ "

# -----------------------------------------------------------------------------

foreach cmd $commands {
	send "$cmd\r"
	expect "$ "
}

# -----------------------------------------------------------------------------

send "exit\r"
close

